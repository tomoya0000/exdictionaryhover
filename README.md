# ExDictionaryHover

ExDictionaryHoverは、外部ファイル（CSV/TSV形式）で定義したSQL辞書を参照し、エディタ上でSQL IDにカーソルを合わせると対応するSQL文や説明をホバー表示するVisual Studio Code拡張機能です。

## 主な機能

- 高速なマッピング: 大量のSQLマッピングでも快適な動作
- 柔軟な設定: CSV/TSVファイルのパス、列番号、エンコードを自由に設定可能
- マルチファイルサポート: 複数の辞書ファイルを同時に読み込み可能
- 説明文対応: SQL文に加えて説明文も表示可能
- インテリジェントな検索: 引用符で囲まれたSQL IDも正しく認識
- エラー通知: 問題発生時は通知とログで詳細を確認可能

## インストールと使い方

### インストール

1. 配布されたVSIXファイル（`ExDictionaryHover-x.x.x.vsix`）をダウンロード
2. VS Codeを開き、拡張機能ビュー（Ctrl+Shift+X）を表示
3. 拡張機能ビューの「...」（その他のアクション）メニューから「VSIXからのインストール...」を選択
4. ダウンロードしたVSIXファイルを選択
5. VS Codeを再起動して拡張機能を有効化

### 設定方法

1. SQL ID・SQL文・説明を含むCSV/TSVファイルを準備
2. VS Codeの設定（settings.json）で以下を設定:
   - CSVファイルのパス（相対パスまたは絶対パス）
   - ID列、SQL列、説明列の番号（0始まり）
   - 必要に応じてエンコードを指定

### 使用方法

1. VS Codeでファイルを開く
2. SQL IDにカーソルを合わせる
3. ホバーウィンドウにSQL文と説明が表示される

## 拡張機能設定

この拡張機能は以下の設定をサポートします（`settings.json`に記述）:

```json
"exDictionaryHover.csvFiles": [
  {
    "filePath": "sql/sqlmap.tsv",
    "idCol": 0,
    "sqlCol": 1,
    "descCol": 2,
    "encode": "utf-8",
  }
]
```

- `filePath`: CSV/TSVファイルのパス（拡張機能ディレクトリ基準、または絶対パス）
- `idCol`: SQL IDの列番号（0始まり）
- `sqlCol`: SQL文の列番号（0始まり）
- `descCol`: 説明の列番号（0始まり、省略可）
- `encode`: ファイルのエンコード（省略可能、デフォルトutf-8）

## 必要条件

- Visual Studio Code v1.100.0 以上

## トラブルシューティング

### ログの確認方法

1. VS Code の「表示」メニューから「出力」を選択
2. 出力パネルのドロップダウンから「ExDictionaryHover」を選択
3. ファイル読み込みやマッピング登録の詳細ログを確認可能

### 一般的な問題

- SQL IDが辞書に存在しない場合は何も表示されません
- CSV/TSVファイルの1行目はヘッダーとして扱われます
- ファイルが見つからない場合はエラー通知が表示されます
- エンコーディングエラーの場合は出力パネルにエラー詳細が記録されます

### パフォーマンスについて

- 大量のSQLマッピングでも高速な検索が可能です
- メモリ使用量は登録されたSQL数に比例します

## リリースノート

### 0.1.0

- パフォーマンス改善: Mapを使用した高速なルックアップを実装
- クォーテーション対応: 半角/全角の引用符で囲まれたSQL IDも認識
- ログ機能の強化: 出力パネルでのログ表示とエラー通知を追加

### 0.0.1

- 初期リリース: SQL辞書ファイルのホバー表示に対応

---

## ライセンス

MIT
